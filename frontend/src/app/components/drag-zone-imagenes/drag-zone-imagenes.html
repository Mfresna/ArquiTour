<!-- <fieldset>
    <label for="imagen">{{label}}</label>

    <div id="dropzone"
        role="button"
        tabindex="0"
        (click)="abrirExplorador($event)"
        (keyup.enter)="abrirExplorador($event)"
        (dragover)="permitirSoltar($event)"
        (dragenter)="permitirSoltar($event)">

        <div id="contenedor-img">
        
            @if (vistaPrevia || imgExistente) {
                <img id="preview" [src]="vistaPrevia || imgExistente!" alt="Vista previa"/>
            } @else {
            <div id="dropzone-msg">
                
                <strong>Arrastre y suelte una imagen aqu√≠<br></strong>
                <span> o haga clic para seleccionar desde su equipo <br></span>
                <small class="formats"> Formatos: JPG, PNG, WEBP</small>
            </div>
            }

            <input 
                #inputArchivo
                id="imagen"
                type="file" 
                accept="image/*" 
                hidden 
                (change)="capturarArchivo($event)"/>

        </div>

      
        @if (vistaPrevia || imgExistente) {
            <div id="botonera-img" (click)="$event.stopPropagation()">
                <button type="button" 
                    class="btn-outline" 
                    (click)="limpiarImagen()">{{labelBoton}}</button>
            </div>
        }
        
    </div>

</fieldset> -->


<fieldset>
  <label for="imagen">{{ label }}</label>

  <div id="dropzone"
       role="button"
       tabindex="0"
       (click)="abrirExplorador($event)"
       (keyup.enter)="abrirExplorador($event)"
       (dragover)="permitirSoltar($event)"
       (dragenter)="permitirSoltar($event)"
       (drop)="capturarArchivo($event)">

    <div id="contenedor-img">

      <!-- üü£ MODO MULTIPLE -->
      @if (multiple) {
        @if (vistasPrevias.length) {
          <div class="grid-previas">
            @for (url of vistasPrevias; let i = $index; track i) {
              <div class="item-previa">
                <img [src]="url" alt="Imagen {{ i + 1 }}" />
                <button type="button"
                        class="btn-quitar"
                        (click)="quitarImagen(i, $event)">‚úï</button>
              </div>
            }
          </div>
        } @else {
          <div id="dropzone-msg">
            <strong>Arrastre y suelte una o varias im√°genes aqu√≠<br></strong>
            <span> o haga clic para seleccionar desde su equipo <br></span>
            <small class="formats"> Formatos: JPG, PNG, WEBP</small>
          </div>
        }
      } @else {

      <!-- üü¢ MODO SINGLE (como antes) -->
        @if (vistasPrevias.length || imgExistente) {
          <img
            id="preview"
            [src]="vistasPrevias[0] || imgExistente!"
            alt="Vista previa" />
        } @else {
          <div id="dropzone-msg">
            <strong>Arrastre y suelte una imagen aqu√≠<br></strong>
            <span> o haga clic para seleccionar desde su equipo <br></span>
            <small class="formats"> Formatos: JPG, PNG, WEBP</small>
          </div>
        }
      }

      <input
        #inputArchivo
        id="imagen"
        type="file"
        accept="image/*"
        [attr.multiple]="multiple ? '' : null"
        hidden
        (change)="capturarArchivo($event)" />

    </div>

    <!-- Bot√≥n quitar -->
    @if (!multiple && (vistasPrevias.length || imgExistente)) {
      <div id="botonera-img" (click)="$event.stopPropagation()">
        <button type="button"
                class="btn-outline"
                (click)="limpiarImagen($event)">
          {{ labelBoton }}
        </button>
      </div>
    }

    @if (multiple && vistasPrevias.length) {
      <div id="botonera-img" (click)="$event.stopPropagation()">
        <button type="button"
                class="btn-outline"
                (click)="limpiarImagen($event)">
          Quitar todas
        </button>
      </div>
    }

  </div>

</fieldset>
